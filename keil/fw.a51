; ASM2464PD Firmware Reconstruction
; Starting with vectors and first functions

$NOMOD51

;--------------------------------------------------------------------
; Reset Vector at 0x0000
;--------------------------------------------------------------------
        CSEG    AT 0000H
        LJMP    0431AH          ; Reset -> main

;--------------------------------------------------------------------
; INT0 Vector at 0x0003
;--------------------------------------------------------------------
        CSEG    AT 0003H
        LJMP    00E5BH          ; INT0 handler

;--------------------------------------------------------------------
; Function at 0x0006-0x0011
; Calls 0x50DB, decrements counter at XDATA 0x000A
;--------------------------------------------------------------------
        CSEG    AT 0006H
func_0006:
        LCALL   050DBH          ; 12 50 DB
        MOV     DPTR, #000AH    ; 90 00 0A
        MOVX    A, @DPTR        ; E0
        JZ      $+4             ; 60 02 (jump to RET)
        DEC     A               ; 14
        MOVX    @DPTR, A        ; F0
        RET                     ; 22

;--------------------------------------------------------------------
; NOP padding at 0x0012
;--------------------------------------------------------------------
        CSEG    AT 0012H
        NOP                     ; 00

;--------------------------------------------------------------------
; INT1 Vector at 0x0013
;--------------------------------------------------------------------
        CSEG    AT 0013H
        LJMP    04486H          ; INT1 handler

        END
